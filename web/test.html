<!DOCTYPE html>
<html>
<head>
	<title>Bootstrap 101 Template</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="/css/bootstrap.css" rel="stylesheet">
	<link href="/css/bootstrap-responsive.css" rel="stylesheet">
</head>
<body>
<div class="container-fluid">
	<div class="row-fluid">
		<div class="span12">

    		<h1>JS Test for API</h1>
	    	<div class="row-fluid">
	  			<div class="span6 ">
	  				<h2>Тестируем API:</h2>
					<div class="accordion" id="accordion2">
						<div class="accordion-group">
							<div class="accordion-heading">
								<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseFranchise">
								Сеть
								</a>
							</div>
							<div id="collapseFranchise" class="accordion-body collapse in">
								<div class="accordion-inner">

									<ul class="nav nav-tabs" id="myTab">
										<li class="active"><a href="#get_list_franchise">GET LIST</a></li>
										<li><a href="#show_one_franchise">SHOW ONE</a></li>
										<li><a href="#create_franchise">CREATE</a></li>
										<li><a href="#update_franchise">UPDATE</a></li>
										<li><a href="#delete_franchise">DELETE</a></li>
									</ul>
									 
									<div class="tab-content">
										<div class="tab-pane active get_list" id="get_list_franchise">
											<label>URL</label>
											<input type="text" class="url" value="/franchise" />
											<span class="btn btn-block send">Выполнить</span>
										</div>
										<div class="tab-pane show_one" id="show_one_franchise">

											<form class="form-horizontal">
  												<div class="control-group">
													<label class="control-label">URL:</label>
													<div class="controls">
														<input type="text" class="url" disabled="disabled" value="/franchise/1" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">METHOD:</label>
													<div class="controls">
														<input type="text" class="method" disabled="disabled" value="GET" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">ID:</label>
													<div class="controls">
														<input type="text" class="franchise_id" value="1" />
													</div>
												</div>

												<div class="control-group">
													<div class="controls">
														<span class="btn send">Выполнить</span>
													</div>
												</div>
											</form>
										</div>
										<div class="tab-pane create" id="create_franchise">
											<form class="form-horizontal">
  												<div class="control-group">
													<label class="control-label">URL:</label>
													<div class="controls">
														<input type="text" class="url" disabled="disabled" value="/franchise/" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">METHOD:</label>
													<div class="controls">
														<input type="text" class="method" disabled="disabled" value="POST" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">Лого:</label>
													<div class="controls">
														<input type="text" name="franchise[logo]" required="required" maxlength="100" class="logo" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">Бренд*:</label>
													<div class="controls">
														<input type="text" name="franchise[brand]" required="required" maxlength="100" class="brand" />
													</div>
												</div>
													
												<div class="control-group">
													<label class="control-label">Индустрия*:</label>
													<div class="controls">
														<input type="text" name="franchise[industry]" required="required" maxlength="100" class="industry" />
													</div>
												</div>

												<div class="control-group">
													<div class="controls">
														<span class="btn send_create_franchise">Выполнить</span>
													</div>
												</div>
											</form>
										</div>
										<div class="tab-pane update" id="update_franchise">
											<form class="form-horizontal">
  												<div class="control-group">
													<label class="control-label">URL:</label>
													<div class="controls">
														<input type="text" class="url" disabled="disabled" value="/franchise/" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">METHOD:</label>
													<div class="controls">
														<input type="text" class="method" disabled="disabled" value="PUT" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">ID:</label>
													<div class="controls">
														<input type="text" class="id" name="id" value="1" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">Лого:</label>
													<div class="controls">
														<input type="text" name="franchise[logo]" required="required" maxlength="100" class="logo" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">Бренд*:</label>
													<div class="controls">
														<input type="text" name="brand" required="required" maxlength="100" class=" brand" />
													</div>
												</div>
													
												<div class="control-group">
													<label class="control-label">Индустрия*:</label>
													<div class="controls">
														<input type="text" name="industry" required="required" maxlength="100" class=" industry" />
													</div>
												</div>

												<div class="control-group">
													<div class="controls">
														<span class="btn send_update_franchise">Выполнить</span>
													</div>
												</div>
											</form>
										</div>
										<div class="tab-pane delete" id="delete_franchise">
											<form class="form-horizontal">
												<div class="control-group">
													<label class="control-label">URL:</label>
													<div class="controls">
														<input type="text" class="url" disabled="disabled" id="show_one_franchise" value="/franchise/1" />
	  												</div>
	  											</div>

												<div class="control-group">
													<label class="control-label">METHOD:</label>
													<div class="controls">
														<input type="text" class="method" disabled="disabled" value="DELETE" />
													</div>
												</div>

												<div class="control-group">
													<label class="control-label">METHOD:</label>
													<div class="controls">
														<input type="text" id="franchise_id" class="id" value="1" />
													</div>
												</div>

												<div class="control-group">
													<div class="controls">
														<span class="btn send_delete_franchise">Выполнить</span>
													</div>
												</div>
											</form>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="accordion-group">
							<div class="accordion-heading">
								<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapsePoint">
								Точки
								</a>
							</div>
							<div id="collapsePoint" class="accordion-body collapse">
								<div class="accordion-inner">

									<ul class="nav nav-tabs" id="myTab">
										<li class="active"><a href="#get_list_franchise">GET LIST</a></li>
										<li><a href="#show_one_franchise">SHOW ONE</a></li>
										<li><a href="#create_franchise">CREATE</a></li>
										<li><a href="#update_franchise">UPDATE</a></li>
										<li><a href="#delete_franchise">DELETE</a></li>
									</ul>
									 
									<div class="tab-content">
										<div class="tab-pane active get_list" id="get_list_franchise">
											<label>URL</label>
											<input type="text" class="url" value="/franchise" />
											<span class="btn btn-block send">Выполнить</span>
										</div>
										<div class="tab-pane show_one" id="show_one_franchise">

											<form class="form-horizontal">
  												<div class="control-group">
													<label class="control-label">URL:</label>
													<div class="controls">
														<input type="text" class="url" disabled="disabled" value="/franchise/1" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">METHOD:</label>
													<div class="controls">
														<input type="text" class="method" disabled="disabled" value="GET" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">ID:</label>
													<div class="controls">
														<input type="text" class="franchise_id" value="1" />
													</div>
												</div>

												<div class="control-group">
													<div class="controls">
														<span class="btn send">Выполнить</span>
													</div>
												</div>
											</form>
										</div>
										<div class="tab-pane create" id="create_franchise">
											<form class="form-horizontal">
  												<div class="control-group">
													<label class="control-label">URL:</label>
													<div class="controls">
														<input type="text" class="url" disabled="disabled" value="/franchise/" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">METHOD:</label>
													<div class="controls">
														<input type="text" class="method" disabled="disabled" value="POST" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">Бренд*:</label>
													<div class="controls">
														<input type="text" name="franchise[brand]" required="required" maxlength="100" class="brand" />
													</div>
												</div>
													
												<div class="control-group">
													<label class="control-label">Индустрия*:</label>
													<div class="controls">
														<input type="text" name="franchise[industry]" required="required" maxlength="100" class="industry" />
													</div>
												</div>

												<div class="control-group">
													<div class="controls">
														<span class="btn send_create_franchise">Выполнить</span>
													</div>
												</div>
											</form>
										</div>
										<div class="tab-pane update" id="update_franchise">
											<form class="form-horizontal">
  												<div class="control-group">
													<label class="control-label">URL:</label>
													<div class="controls">
														<input type="text" class="url" disabled="disabled" value="/franchise/" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">METHOD:</label>
													<div class="controls">
														<input type="text" class="method" disabled="disabled" value="PUT" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">ID:</label>
													<div class="controls">
														<input type="text" class="id" name="id" value="1" />
													</div>
												</div>

  												<div class="control-group">
													<label class="control-label">Бренд*:</label>
													<div class="controls">
														<input type="text" name="brand" required="required" maxlength="100" class=" brand" />
													</div>
												</div>
													
												<div class="control-group">
													<label class="control-label">Индустрия*:</label>
													<div class="controls">
														<input type="text" name="industry" required="required" maxlength="100" class=" industry" />
													</div>
												</div>

												<div class="control-group">
													<div class="controls">
														<span class="btn send_update_franchise">Выполнить</span>
													</div>
												</div>
											</form>
										</div>
										<div class="tab-pane delete" id="delete_franchise">
											<form class="form-horizontal">
												<div class="control-group">
													<label class="control-label">URL:</label>
													<div class="controls">
														<input type="text" class="url" disabled="disabled" id="show_one_franchise" value="/franchise/1" />
	  												</div>
	  											</div>

												<div class="control-group">
													<label class="control-label">METHOD:</label>
													<div class="controls">
														<input type="text" class="method" disabled="disabled" value="DELETE" />
													</div>
												</div>

												<div class="control-group">
													<label class="control-label">METHOD:</label>
													<div class="controls">
														<input type="text" id="franchise_id" class="id" value="1" />
													</div>
												</div>

												<div class="control-group">
													<div class="controls">
														<span class="btn send_delete_franchise">Выполнить</span>
													</div>
												</div>
											</form>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="accordion-group">
							<div class="accordion-heading">
								<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseMission">
								Задания
								</a>
							</div>
							<div id="collapseMission" class="accordion-body collapse">
								<div class="accordion-inner">

									<ul class="nav nav-tabs" id="myTab">
										<li class="active"><a href="#get_list">GET LIST</a></li>
										<li><a href="#show_one">SHOW ONE</a></li>
										<li><a href="#create">CREATE</a></li>
										<li><a href="#update">UPDATE</a></li>
										<li><a href="#delete">DELETE</a></li>
									</ul>
									 
									<div class="tab-content">
										<div class="tab-pane active" id="get_list">
											<label>URL</label>
											<input type="text" class="url" value="/mission" />
											<span class="btn send">Выполнить</span>
										</div>
										<div class="tab-pane" id="show_one">
											<label>URL</label>
											<input type="text" class="url" disabled="disabled" id="show_one_mission" value="/mission/1" />
											<input type="text" id="mission_id" value="1" />
											<span class="btn send">Выполнить</span>
										</div>
										<div class="tab-pane" id="create">

										</div>
										<div class="tab-pane" id="update">update</div>
										<div class="tab-pane" id="delete">delete</div>
									</div>
								</div>
							</div>
						</div>
					</div>
	  			</div>
	  			<div class="span6">
	  				<h2>Результат</h2>
	  				<div class="row-fluid thumbnail">

	  					<div class="progress hide progress-striped active"><div class="bar" style="width: 100%;"></div></div>

	  					<h3>Заголовок:</h3>
	  					<p id="status"></p>
	  					<h3>Ответ:</h3>
	  					<pre id="response"></pre>
	  					<a class="btn btn-block clear_result">Очистить</a>
	  				</div>
	  			</div>
	  		</div>
	  	</div>
	</div>
</div>
<script src="/js/jquery.min.js"></script>
<script src="/js/underscore-min.js"></script>
<script src="/js/backbone-min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/bootstrap-tab.js"></script>
<!--<script src="/js/test.js"></script>-->	
<script>
  $(function () {


	$('.franchise_id').bind('change keyup', function() {
		$('#show_one_franchise .url').val('/franchise/'+$(this).val());
	});
	
	$('#update_franchise .id').bind('change keyup', function() {
		$('#update_franchise .url').val('/franchise/'+$(this).val());
	});

	$('#delete_franchise .id').bind('change keyup', function() {
		$('#delete_franchise .url').val('/franchise/'+$(this).val());
	});


    $('#myTab a:first').tab('show');
    $('#myTab a').click(function (e) {
		e.preventDefault();
		$(this).tab('show');
	});

    $('.clear_result').click(function(){

		$('.progress').hide();
		$('#status').html('');
		$('#response').html('');
    });

    $('.send').click(function(){
		
		$('.progress').show();
		$('#status').html('');
		$('#response').html('');

		$.ajax({
		  type: "GET",
		  url: '/app_dev.php'+$('.active .url').val()
		}).done(function( a,b,c) {
		  console.log( "done: ",a, b,c);
		  $('.progress').hide();
		  $('#status').html(c.status);
		  $('#response').html(c.responseText);
		}).error(function(a,b,c){
		  console.log( "error: ", a, b,c);
		  $('.progress').hide();
		  $('#status').html(a.status);
		  $('#response').html(a.responseText);
		});

    })

	$('.send_create_franchise').click(function(){
		
		$('.progress').show();
		$('#status').html('');
		$('#response').html('');

		$.ajax({
		  type: "POST",
		  url: '/app_dev.php'+$('#create_franchise .url').val(),
		  data: {	'franchise[brand]': $('#create_franchise .brand').val(), 
		  			'franchise[industry]': $('#create_franchise .industry').val(),
		  			'franchise[logo]': $('#create_franchise .logo').val(),
		  		}
		}).done(function( a,b,c) {
		  console.log( "done: ",a, b,c);
		  $('.progress').hide();
		  $('#status').html(c.status);
		  $('#response').html(c.responseText);
		}).error(function(a,b,c){
		  console.log( "error: ", a, b,c);
		  $('.progress').hide();
		  $('#status').html(a.status);
		  $('#response').html(a.responseText);
		});

    });

	$('.send_update_franchise').click(function(){
		
		$('.progress').show();
		$('#status').html('');
		$('#response').html('');

		$.ajax({
		  type: "PUT",
		  url: '/app_dev.php'+$('#update_franchise .url').val(),
		  data: {	'franchise[brand]': $('#update_franchise .brand').val(), 
		  			'franchise[industry]': $('#update_franchise .industry').val(),
		  			'franchise[logo]': $('#update_franchise .logo').val(),
		  		}
		}).done(function( a,b,c) {
		  console.log( "done: ",a, b,c);
		  $('.progress').hide();
		  $('#status').html(c.status);
		  $('#response').html(c.responseText);
		}).error(function(a,b,c){
		  console.log( "error: ", a, b,c);
		  $('.progress').hide();
		  $('#status').html(a.status);
		  $('#response').html(a.responseText);
		});


    });
		
	$('.send_delete_franchise').click(function(){
		
		$('.progress').show();
		$('#status').html('');
		$('#response').html('');

		$.ajax({
		  type: "DELETE",
		  url: '/app_dev.php'+$('#delete_franchise .url').val()
		}).done(function( a,b,c) {
		  console.log( "done: ",a, b,c);
		  $('.progress').hide();
		  $('#status').html(c.status);
		  $('#response').html(c.responseText);
		}).error(function(a,b,c){
		  console.log( "error: ", a, b,c);
		  $('.progress').hide();
		  $('#status').html(a.status);
		  $('#response').html(a.responseText);
		});
    });

  })
</script>
</body>
</html>